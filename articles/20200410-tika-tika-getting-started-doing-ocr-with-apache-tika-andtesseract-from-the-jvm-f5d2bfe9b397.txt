1:"$Sreact.fragment"
2:I[5244,[],""]
3:I[3866,[],""]
4:I[8173,["970","static/chunks/970-4a0f7daee52c7cff.js","173","static/chunks/173-77a4cc13cb7e18d3.js","571","static/chunks/app/articles/%5Bslug%5D/layout-0f8ac0524a72511b.js"],""]
5:I[7970,["970","static/chunks/970-4a0f7daee52c7cff.js","904","static/chunks/app/articles/%5Bslug%5D/page-c42cdda36797932a.js"],"Image"]
7:I[6213,[],"OutletBoundary"]
9:I[6213,[],"MetadataBoundary"]
b:I[6213,[],"ViewportBoundary"]
d:I[4835,[],""]
:HL["/_next/static/media/4cf2300e9c8272f7-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/deecf931bfbdc38e.css","style"]
:HL["/_next/static/css/13422ae1d848e043.css","style"]
0:{"P":null,"b":"A3FqRGOyWgaqwsb93pnMa","p":"","c":["","articles","20200410-tika-tika-getting-started-doing-ocr-with-apache-tika-andtesseract-from-the-jvm-f5d2bfe9b397"],"i":false,"f":[[["",{"children":["articles",{"children":[["slug","20200410-tika-tika-getting-started-doing-ocr-with-apache-tika-andtesseract-from-the-jvm-f5d2bfe9b397","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/deecf931bfbdc38e.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":["$","body",null,{"className":"__variable_188709 __variable_9a8899","children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]]}],{"children":["articles",["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","articles","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","20200410-tika-tika-getting-started-doing-ocr-with-apache-tika-andtesseract-from-the-jvm-f5d2bfe9b397","d"],["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/13422ae1d848e043.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],[null,["$","nav",null,{"className":"TopBar_top-bar__RDkoF","children":["$","div",null,{"children":[["$","$L4",null,{"href":"/","children":["$","$L5",null,{"src":"/codestar_logo_cream-red.svg","alt":"Codestar Logo","width":150,"height":40}]}],["$","ul",null,{"children":["$","li",null,{"children":["$","a",null,{"href":"https://www.linkedin.com/company/codestar-powered-by-sopra-steria/","children":"Contact"}]}]}]]}]}],["$","div",null,{"className":"layout_content__K15KO","children":["$","main",null,{"className":"layout_main__Afkre","children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","articles","children","$0:f:0:1:2:children:2:children:0","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]}]}],["$","footer",null,{"className":"Footer_footer__OYoYH","children":["$","div",null,{"children":[["$","ul",null,{"className":"contact-info","children":[["$","li",null,{"children":["$","a",null,{"href":"mailto:codestar@ordina.nl","children":"codestar.nl@soprasteria.com"}]}],["$","li",null,{"children":["$","a",null,{"href":"tel:+31306637000","children":"+31 30 6637000"}]}],["$","li",null,{"children":["$","a",null,{"href":"https://maps.google.com/maps?ll=52.057652,5.111462&z=16&t=m&hl=en-GB&gl=NL&mapclient=embed&cid=15918536717636328792","target":"_blank","rel":"noopener noreferrer","children":"Ringwade 1, 3439 LM Nieuwegein"}]}]]}],["$","p",null,{"className":"social-links","children":[["$","a",null,{"href":"https://mastodon.social/@codestar","aria-label":"Mastodon","rel":"me","children":["$","$L5",null,{"src":"/mastodon_logo.svg","alt":"Codestar Mastodon","width":32,"height":32}]}],["$","a",null,{"href":"https://github.com/code-star","aria-label":"Github","children":["$","$L5",null,{"src":"/github_logo.svg","alt":"Codestar Github","width":32,"height":32}]}],["$","a",null,{"href":"https://medium.com/codestar-blog","aria-label":"Medium","children":["$","$L5",null,{"src":"/medium_logo.svg","alt":"Codestar Medium","width":32,"height":32}]}],["$","a",null,{"href":"https://www.linkedin.com/company/codestar-powered-by-sopra-steria/","aria-label":"Linkedin","children":["$","$L5",null,{"src":"/linkedin_logo.svg","alt":"Codestar LinkedIn","width":32,"height":32}]}],["$","a",null,{"href":"https://www.youtube.com/channel/UCqwHhJNEUe7D-HGsX4zvKzQ","aria-label":"Youtube","children":["$","$L5",null,{"src":"/youtube_logo.svg","alt":"Codestar Youtube","width":36,"height":32}]}],["$","a",null,{"href":"https://www.meetup.com/Code-Star-Night","aria-label":"Meetup.com","children":["$","$L5",null,{"src":"/meetup_logo.svg","alt":"Codestar Meetup","width":32,"height":32}]}]]}]]}]}]]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L6",null,["$","$L7",null,{"children":"$L8"}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","GWSh7enQWZe60ruUf7Fue",{"children":[["$","$L9",null,{"children":"$La"}],["$","$Lb",null,{"children":"$Lc"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}]]}],false]],"m":"$undefined","G":["$d","$undefined"],"s":false,"S":true}
e:I[9214,["970","static/chunks/970-4a0f7daee52c7cff.js","904","static/chunks/app/articles/%5Bslug%5D/page-c42cdda36797932a.js"],"PreloadChunks"]
6:[["$","h1",null,{"children":"Tika Tika! Getting started doing OCR with Apache Tika andTesseract from the JVM"}],["$","p",null,{"children":["Published at ","2020-04-10"," by ","Nathan Perdijk"]}],[["$","$Le",null,{"moduleIds":"$undefined"}],"$Lf"]]
10:T524,package tika.example

import java.io.InputStream

import org.apache.tika.config.TikaConfig
import org.apache.tika.metadata.Metadata
import org.apache.tika.parser.ocr.TesseractOCRConfig
import org.apache.tika.parser.pdf.PDFParserConfig
import org.apache.tika.parser.{AutoDetectParser, ParseContext, Parser}
import org.apache.tika.sax.BodyContentHandler

object TikaOCRParser {
  private val pdfConfig: PDFParserConfig = {
    val pdfConf = new PDFParserConfig()
    pdfConf.setOcrDPI(100) //scalastyle:ignore magic.number
    pdfConf.setDetectAngles(true)
    pdfConf.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.OCR_ONLY)

    pdfConf
  }

  private val tesseractOCRConfig: TesseractOCRConfig = {
    val tessConf = new TesseractOCRConfig()
    tessConf.setLanguage("eng")
    tessConf.setEnableImageProcessing(1)

    tessConf
  }

  private val parser = new AutoDetectParser(TikaConfig.getDefaultConfig)

  private val parseContext = {
    val parseCont = new ParseContext()
    parseCont.set(classOf[Parser], parser)
    parseCont.set(classOf[PDFParserConfig], pdfConfig)
    parseCont.set(classOf[TesseractOCRConfig], tesseractOCRConfig)
    parseCont
  }

  def parse(inputStream: InputStream, handler: BodyContentHandler, metadata: Metadata): Unit = parser.parse(inputStream, handler, metadata, parseContext)
}
f:[["$","h2",null,{"children":"Tika Tika! Getting started doing OCR with Apache Tika andTesseract from the JVM (Scala, Java, Kotlin…)."}],"\n",["$","p",null,{"children":["$","em",null,{"children":"I can do DataScience, mate!"}]}],"\n",["$","p",null,{"children":"Some things are hard. Some things are not… Turns out that using OCR (Object Character Recognition) using Tesseract from the JVM is… not hard!"}],"\n",["$","img",null,{"src":"/articles/images/1Aj8UgvxNf7r4zTjs-JqL7A.jpeg","alt":"","width":"292"}],"\n",["$","p",null,{"children":["The trickiest part, really, is ",["$","a",null,{"href":"https://github.com/tesseract-ocr/tesseract/wiki","children":"setting up Tesseract"}]," on the machine you want to do your OCR on. Once you have managed to do that, you can just use the following Scala examples to use ",["$","strong",null,{"children":"Apache Tika"}]," to do OCR in your own JVM project."]}],"\n",["$","h3",null,{"children":["$","strong",null,{"children":"First things first. Taking care of your dependencies…"}]}],"\n",["$","p",null,{"children":["Add these to your ",["$","code",null,{"children":"pom.xml"}]," or other build tool equivalent:"]}],"\n",["$","p",null,{"children":["$","code",null,{"children":"[pom.xml](https://gist.github.com/NRBPerdijk/111fae4189acafb2d75c7c66ba7f2be8#file-pom-xml)"}]}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"    <dependency>\n      <groupId>org.apache.tika</groupId>\n      <artifactId>tika-core</artifactId>\n      <version>1.24</version>\n    </dependency>\n    <dependency>\n      <groupId>org.apache.tika</groupId>\n      <artifactId>tika-parsers</artifactId>\n      <version>1.24</version>\n    </dependency>\n"}]}],"\n",["$","h3",null,{"children":"Then, we need to properly configure a Tika Parser"}],"\n",["$","p",null,{"children":["We need one in order to do actually do any ",["$","a",null,{"href":"https://tika.apache.org/1.24/parser.html","children":"parsing"}],". Because this kind of configuration tends to be ugly, I have put it all inside its own object/class to keep it separate from the rest of the code:"]}],"\n",["$","p",null,{"children":["$","code",null,{"children":"[TikaOCRParser.scala](https://gist.github.com/NRBPerdijk/b59332173c9598991f8774d98266e57d#file-TikaOCRParser-scala)"}]}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"$10"}]}],"\n",["$","p",null,{"children":"Finally, we have to create…"}],"\n",["$","h3",null,{"children":"The code that provides the file to be OCRed."}],"\n",["$","p",null,{"children":["$","code",null,{"children":"[TikaOCRApplication.scala](https://gist.github.com/NRBPerdijk/848526c10239f30129e20e8ea9ff6960#file-TikaOCRApplication-scala)"}]}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"package tika.example\n\nimport java.io.ByteArrayOutputStream\nimport java.nio.charset.Charset\n\nimport org.apache.tika.metadata.Metadata\nimport org.apache.tika.sax.BodyContentHandler\n\nimport scala.util.{Failure, Success, Using}\n\nobject TikaOCRApplication extends App {\n  val input = getClass.getResourceAsStream(\"/ExampleOCR.jpg\")\n\n  val outputStream = new ByteArrayOutputStream()\n\n  val attemptedOCR = Using(input) { inputStream =>\n    TikaOCRParser.parse(inputStream, new BodyContentHandler(outputStream), new Metadata())\n  }.map { _ =>\n    new String(outputStream.toByteArray, Charset.defaultCharset())\n  }\n\n  attemptedOCR match {\n    case Success(value) => println(s\"OCR result was: $value\")\n    case Failure(exception) => println(s\"OCR has failed, exception message was: ${exception.getMessage}\")\n  }\n\n}\n"}]}],"\n",["$","p",null,{"children":["We just turn the file we want to ",["$","code",null,{"children":"OCR"}]," into an ",["$","code",null,{"children":"InputStream"}]," and hand that off to the ",["$","code",null,{"children":"TikaOCRParser"}]," we specified above for parsing. Because using ",["$","code",null,{"children":"InputStreams"}]," and doing parsing are two IO processes that can (definitely) throw ",["$","code",null,{"children":"Exceptions"}],", I have delegated the handling of the ",["$","code",null,{"children":"InputStream"}]," using Scala’s ",["$","code",null,{"children":"Using"}]," functionality, which will automatically wrap the whole operation into a ",["$","code",null,{"children":"Try"}]," while also making sure that the ",["$","code",null,{"children":"InputStream"}]," is closed when everything is done, ",["$","em",null,{"children":"even when exceptions are thrown"}],". If the result is a Success, I convert it into a regular String, which can then be printed, or otherwise used at your convenience."]}],"\n",["$","p",null,{"children":[["$","em",null,{"children":"(The example file is a"}]," ",["$","code",null,{"children":"jpeg"}],", but lots of different image formats, as well as ",["$","code",null,{"children":"PDF"}],", are supported. Some, like ",["$","code",null,{"children":"JPEG2000"}],["$","em",null,{"children":", might require extra supporting software to be installed on the machine.)"}]]}],"\n",["$","p",null,{"children":["So, that’s it. Pretty easy, right? Check out the ",["$","a",null,{"href":"https://tika.apache.org/","children":"Apache Tika documentation"}]," to see what other great functionality is available. Tesseract OCR is a pretty tricky field in and off itself, so be sure to check out all the ",["$","a",null,{"href":"https://tesseract-ocr.github.io/tessdoc/ImproveQuality","children":"tweaks"}]," you may have to make for your particular dataset. If you want to see the full code for this example, you can ",["$","a",null,{"href":"https://github.com/NRBPerdijk/tikascalaexample","children":"check it out on GitHub"}],". Last but not least, kudos to the Apache Software Foundation for their continuing work towards great Open Source solutions."]}],"\n",["$","p",null,{"children":["Edit: I also wrote a short intro using Apache Tika to do Named-Entity Recognition (NER): ",["$","a",null,{"href":"https://medium.com/codestar-blog/tika-nerding-getting-started-using-named-entity-recognition-with-opennlp-on-the-jvm-scala-java-befc396d6dc5","children":"Tika NERding: Getting started using Named-Entity Recognition with OpenNLP on the JVM"}],"."]}],"\n",["$","img",null,{"src":"/articles/images/1P93TyWUqN0foFjmMaB0ehQ.jpeg","alt":"","width":"800"}]]
c:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
a:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Codestar"}],["$","meta","2",{"name":"description","content":"Codestar - a Sopra Steria team"}],["$","link","3",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
8:null
