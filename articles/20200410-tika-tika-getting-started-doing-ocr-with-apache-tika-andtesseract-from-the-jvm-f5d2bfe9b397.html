<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/4cf2300e9c8272f7-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/articles/images/1Aj8UgvxNf7r4zTjs-JqL7A.jpeg"/><link rel="preload" as="image" href="/articles/images/1P93TyWUqN0foFjmMaB0ehQ.jpeg"/><link rel="stylesheet" href="/_next/static/css/deecf931bfbdc38e.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/13422ae1d848e043.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-bafee5ae243c8c89.js"/><script src="/_next/static/chunks/4bd1b696-20882bf820444624.js" async=""></script><script src="/_next/static/chunks/517-0d7e8c6ba2452810.js" async=""></script><script src="/_next/static/chunks/main-app-b25855ec5ccc6eda.js" async=""></script><script src="/_next/static/chunks/970-4a0f7daee52c7cff.js" async=""></script><script src="/_next/static/chunks/173-77a4cc13cb7e18d3.js" async=""></script><script src="/_next/static/chunks/app/articles/%5Bslug%5D/layout-0f8ac0524a72511b.js" async=""></script><script src="/_next/static/chunks/app/articles/%5Bslug%5D/page-c42cdda36797932a.js" async=""></script><meta name="next-size-adjust" content=""/><title>Codestar</title><meta name="description" content="Codestar - a Sopra Steria team"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_188709 __variable_9a8899"><nav class="TopBar_top-bar__RDkoF"><div><a href="/"><img alt="Codestar Logo" loading="lazy" width="150" height="40" decoding="async" data-nimg="1" style="color:transparent" src="/codestar_logo_cream-red.svg"/></a><ul><li><a href="https://www.linkedin.com/company/codestar-powered-by-sopra-steria/">Contact</a></li></ul></div></nav><div class="layout_content__K15KO"><main class="layout_main__Afkre"><h1>Tika Tika! Getting started doing OCR with Apache Tika andTesseract from the JVM</h1><p>Published at <!-- -->2020-04-10<!-- --> by <!-- -->Nathan Perdijk</p><h2>Tika Tika! Getting started doing OCR with Apache Tika andTesseract from the JVM (Scala, Java, Kotlin…).</h2>
<p><em>I can do DataScience, mate!</em></p>
<p>Some things are hard. Some things are not… Turns out that using OCR (Object Character Recognition) using Tesseract from the JVM is… not hard!</p>
<img src="/articles/images/1Aj8UgvxNf7r4zTjs-JqL7A.jpeg" alt="" width="292"/>
<p>The trickiest part, really, is <a href="https://github.com/tesseract-ocr/tesseract/wiki">setting up Tesseract</a> on the machine you want to do your OCR on. Once you have managed to do that, you can just use the following Scala examples to use <strong>Apache Tika</strong> to do OCR in your own JVM project.</p>
<h3><strong>First things first. Taking care of your dependencies…</strong></h3>
<p>Add these to your <code>pom.xml</code> or other build tool equivalent:</p>
<p><code>[pom.xml](https://gist.github.com/NRBPerdijk/111fae4189acafb2d75c7c66ba7f2be8#file-pom-xml)</code></p>
<pre><code>    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;
      &lt;artifactId&gt;tika-core&lt;/artifactId&gt;
      &lt;version&gt;1.24&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;
      &lt;artifactId&gt;tika-parsers&lt;/artifactId&gt;
      &lt;version&gt;1.24&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>
<h3>Then, we need to properly configure a Tika Parser</h3>
<p>We need one in order to do actually do any <a href="https://tika.apache.org/1.24/parser.html">parsing</a>. Because this kind of configuration tends to be ugly, I have put it all inside its own object/class to keep it separate from the rest of the code:</p>
<p><code>[TikaOCRParser.scala](https://gist.github.com/NRBPerdijk/b59332173c9598991f8774d98266e57d#file-TikaOCRParser-scala)</code></p>
<pre><code>package tika.example

import java.io.InputStream

import org.apache.tika.config.TikaConfig
import org.apache.tika.metadata.Metadata
import org.apache.tika.parser.ocr.TesseractOCRConfig
import org.apache.tika.parser.pdf.PDFParserConfig
import org.apache.tika.parser.{AutoDetectParser, ParseContext, Parser}
import org.apache.tika.sax.BodyContentHandler

object TikaOCRParser {
  private val pdfConfig: PDFParserConfig = {
    val pdfConf = new PDFParserConfig()
    pdfConf.setOcrDPI(100) //scalastyle:ignore magic.number
    pdfConf.setDetectAngles(true)
    pdfConf.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.OCR_ONLY)

    pdfConf
  }

  private val tesseractOCRConfig: TesseractOCRConfig = {
    val tessConf = new TesseractOCRConfig()
    tessConf.setLanguage(&quot;eng&quot;)
    tessConf.setEnableImageProcessing(1)

    tessConf
  }

  private val parser = new AutoDetectParser(TikaConfig.getDefaultConfig)

  private val parseContext = {
    val parseCont = new ParseContext()
    parseCont.set(classOf[Parser], parser)
    parseCont.set(classOf[PDFParserConfig], pdfConfig)
    parseCont.set(classOf[TesseractOCRConfig], tesseractOCRConfig)
    parseCont
  }

  def parse(inputStream: InputStream, handler: BodyContentHandler, metadata: Metadata): Unit = parser.parse(inputStream, handler, metadata, parseContext)
}
</code></pre>
<p>Finally, we have to create…</p>
<h3>The code that provides the file to be OCRed.</h3>
<p><code>[TikaOCRApplication.scala](https://gist.github.com/NRBPerdijk/848526c10239f30129e20e8ea9ff6960#file-TikaOCRApplication-scala)</code></p>
<pre><code>package tika.example

import java.io.ByteArrayOutputStream
import java.nio.charset.Charset

import org.apache.tika.metadata.Metadata
import org.apache.tika.sax.BodyContentHandler

import scala.util.{Failure, Success, Using}

object TikaOCRApplication extends App {
  val input = getClass.getResourceAsStream(&quot;/ExampleOCR.jpg&quot;)

  val outputStream = new ByteArrayOutputStream()

  val attemptedOCR = Using(input) { inputStream =&gt;
    TikaOCRParser.parse(inputStream, new BodyContentHandler(outputStream), new Metadata())
  }.map { _ =&gt;
    new String(outputStream.toByteArray, Charset.defaultCharset())
  }

  attemptedOCR match {
    case Success(value) =&gt; println(s&quot;OCR result was: $value&quot;)
    case Failure(exception) =&gt; println(s&quot;OCR has failed, exception message was: ${exception.getMessage}&quot;)
  }

}
</code></pre>
<p>We just turn the file we want to <code>OCR</code> into an <code>InputStream</code> and hand that off to the <code>TikaOCRParser</code> we specified above for parsing. Because using <code>InputStreams</code> and doing parsing are two IO processes that can (definitely) throw <code>Exceptions</code>, I have delegated the handling of the <code>InputStream</code> using Scala’s <code>Using</code> functionality, which will automatically wrap the whole operation into a <code>Try</code> while also making sure that the <code>InputStream</code> is closed when everything is done, <em>even when exceptions are thrown</em>. If the result is a Success, I convert it into a regular String, which can then be printed, or otherwise used at your convenience.</p>
<p><em>(The example file is a</em> <code>jpeg</code>, but lots of different image formats, as well as <code>PDF</code>, are supported. Some, like <code>JPEG2000</code><em>, might require extra supporting software to be installed on the machine.)</em></p>
<p>So, that’s it. Pretty easy, right? Check out the <a href="https://tika.apache.org/">Apache Tika documentation</a> to see what other great functionality is available. Tesseract OCR is a pretty tricky field in and off itself, so be sure to check out all the <a href="https://tesseract-ocr.github.io/tessdoc/ImproveQuality">tweaks</a> you may have to make for your particular dataset. If you want to see the full code for this example, you can <a href="https://github.com/NRBPerdijk/tikascalaexample">check it out on GitHub</a>. Last but not least, kudos to the Apache Software Foundation for their continuing work towards great Open Source solutions.</p>
<p>Edit: I also wrote a short intro using Apache Tika to do Named-Entity Recognition (NER): <a href="https://medium.com/codestar-blog/tika-nerding-getting-started-using-named-entity-recognition-with-opennlp-on-the-jvm-scala-java-befc396d6dc5">Tika NERding: Getting started using Named-Entity Recognition with OpenNLP on the JVM</a>.</p>
<img src="/articles/images/1P93TyWUqN0foFjmMaB0ehQ.jpeg" alt="" width="800"/></main></div><footer class="Footer_footer__OYoYH"><div><ul class="contact-info"><li><a href="mailto:codestar@ordina.nl">codestar.nl@soprasteria.com</a></li><li><a href="tel:+31306637000">+31 30 6637000</a></li><li><a href="https://maps.google.com/maps?ll=52.057652,5.111462&amp;z=16&amp;t=m&amp;hl=en-GB&amp;gl=NL&amp;mapclient=embed&amp;cid=15918536717636328792" target="_blank" rel="noopener noreferrer">Ringwade 1, 3439 LM Nieuwegein</a></li></ul><p class="social-links"><a href="https://mastodon.social/@codestar" aria-label="Mastodon" rel="me"><img alt="Codestar Mastodon" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/mastodon_logo.svg"/></a><a href="https://github.com/code-star" aria-label="Github"><img alt="Codestar Github" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/github_logo.svg"/></a><a href="https://medium.com/codestar-blog" aria-label="Medium"><img alt="Codestar Medium" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/medium_logo.svg"/></a><a href="https://www.linkedin.com/company/codestar-powered-by-sopra-steria/" aria-label="Linkedin"><img alt="Codestar LinkedIn" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/linkedin_logo.svg"/></a><a href="https://www.youtube.com/channel/UCqwHhJNEUe7D-HGsX4zvKzQ" aria-label="Youtube"><img alt="Codestar Youtube" loading="lazy" width="36" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/youtube_logo.svg"/></a><a href="https://www.meetup.com/Code-Star-Night" aria-label="Meetup.com"><img alt="Codestar Meetup" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" style="color:transparent" src="/meetup_logo.svg"/></a></p></div></footer><script src="/_next/static/chunks/webpack-bafee5ae243c8c89.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[5244,[],\"\"]\n3:I[3866,[],\"\"]\n4:I[8173,[\"970\",\"static/chunks/970-4a0f7daee52c7cff.js\",\"173\",\"static/chunks/173-77a4cc13cb7e18d3.js\",\"571\",\"static/chunks/app/articles/%5Bslug%5D/layout-0f8ac0524a72511b.js\"],\"\"]\n5:I[7970,[\"970\",\"static/chunks/970-4a0f7daee52c7cff.js\",\"904\",\"static/chunks/app/articles/%5Bslug%5D/page-c42cdda36797932a.js\"],\"Image\"]\n7:I[6213,[],\"OutletBoundary\"]\n9:I[6213,[],\"MetadataBoundary\"]\nb:I[6213,[],\"ViewportBoundary\"]\nd:I[4835,[],\"\"]\n:HL[\"/_next/static/media/4cf2300e9c8272f7-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/deecf931bfbdc38e.css\",\"style\"]\n:HL[\"/_next/static/css/13422ae1d848e043.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"nuWv889VLUOIFLUIxBwBi\",\"p\":\"\",\"c\":[\"\",\"articles\",\"20200410-tika-tika-getting-started-doing-ocr-with-apache-tika-andtesseract-from-the-jvm-f5d2bfe9b397\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"articles\",{\"children\":[[\"slug\",\"20200410-tika-tika-getting-started-doing-ocr-with-apache-tika-andtesseract-from-the-jvm-f5d2bfe9b397\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/deecf931bfbdc38e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_188709 __variable_9a8899\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[\"articles\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"articles\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"20200410-tika-tika-getting-started-doing-ocr-with-apache-tika-andtesseract-from-the-jvm-f5d2bfe9b397\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/13422ae1d848e043.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[null,[\"$\",\"nav\",null,{\"className\":\"TopBar_top-bar__RDkoF\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"$L4\",null,{\"href\":\"/\",\"children\":[\"$\",\"$L5\",null,{\"src\":\"/codestar_logo_cream-red.svg\",\"alt\":\"Codestar Logo\",\"width\":150,\"height\":40}]}],[\"$\",\"ul\",null,{\"children\":[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/company/codestar-powered-by-sopra-steria/\",\"children\":\"Contact\"}]}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"layout_content__K15KO\",\"children\":[\"$\",\"main\",null,{\"className\":\"layout_main__Afkre\",\"children\":[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"articles\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}],[\"$\",\"footer\",null,{\"className\":\"Footer_footer__OYoYH\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"ul\",null,{\"className\":\"contact-info\",\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"mailto:codestar@ordina.nl\",\"children\":\"codestar.nl@soprasteria.com\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"tel:+31306637000\",\"children\":\"+31 30 6637000\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://maps.google.com/maps?ll=52.057652,5.111462\u0026z=16\u0026t=m\u0026hl=en-GB\u0026gl=NL\u0026mapclient=embed\u0026cid=15918536717636328792\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":\"Ringwade 1, 3439 LM Nieuwegein\"}]}]]}],[\"$\",\"p\",null,{\"className\":\"social-links\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://mastodon.social/@codestar\",\"aria-label\":\"Mastodon\",\"rel\":\"me\",\"children\":[\"$\",\"$L5\",null,{\"src\":\"/mastodon_logo.svg\",\"alt\":\"Codestar Mastodon\",\"width\":32,\"height\":32}]}],[\"$\",\"a\",null,{\"href\":\"https://github.com/code-star\",\"aria-label\":\"Github\",\"children\":[\"$\",\"$L5\",null,{\"src\":\"/github_logo.svg\",\"alt\":\"Codestar Github\",\"width\":32,\"height\":32}]}],[\"$\",\"a\",null,{\"href\":\"https://medium.com/codestar-blog\",\"aria-label\":\"Medium\",\"children\":[\"$\",\"$L5\",null,{\"src\":\"/medium_logo.svg\",\"alt\":\"Codestar Medium\",\"width\":32,\"height\":32}]}],[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/company/codestar-powered-by-sopra-steria/\",\"aria-label\":\"Linkedin\",\"children\":[\"$\",\"$L5\",null,{\"src\":\"/linkedin_logo.svg\",\"alt\":\"Codestar LinkedIn\",\"width\":32,\"height\":32}]}],[\"$\",\"a\",null,{\"href\":\"https://www.youtube.com/channel/UCqwHhJNEUe7D-HGsX4zvKzQ\",\"aria-label\":\"Youtube\",\"children\":[\"$\",\"$L5\",null,{\"src\":\"/youtube_logo.svg\",\"alt\":\"Codestar Youtube\",\"width\":36,\"height\":32}]}],[\"$\",\"a\",null,{\"href\":\"https://www.meetup.com/Code-Star-Night\",\"aria-label\":\"Meetup.com\",\"children\":[\"$\",\"$L5\",null,{\"src\":\"/meetup_logo.svg\",\"alt\":\"Codestar Meetup\",\"width\":32,\"height\":32}]}]]}]]}]}]]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",null,[\"$\",\"$L7\",null,{\"children\":\"$L8\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"4LTfROkHsTF79UF9yzPot\",{\"children\":[[\"$\",\"$L9\",null,{\"children\":\"$La\"}],[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:I[9214,[\"970\",\"static/chunks/970-4a0f7daee52c7cff.js\",\"904\",\"static/chunks/app/articles/%5Bslug%5D/page-c42cdda36797932a.js\"],\"PreloadChunks\"]\n6:[[\"$\",\"h1\",null,{\"children\":\"Tika Tika! Getting started doing OCR with Apache Tika andTesseract from the JVM\"}],[\"$\",\"p\",null,{\"children\":[\"Published at \",\"2020-04-10\",\" by \",\"Nathan Perdijk\"]}],[[\"$\",\"$Le\",null,{\"moduleIds\":\"$undefined\"}],\"$Lf\"]]\n"])</script><script>self.__next_f.push([1,"10:T524,package tika.example\n\nimport java.io.InputStream\n\nimport org.apache.tika.config.TikaConfig\nimport org.apache.tika.metadata.Metadata\nimport org.apache.tika.parser.ocr.TesseractOCRConfig\nimport org.apache.tika.parser.pdf.PDFParserConfig\nimport org.apache.tika.parser.{AutoDetectParser, ParseContext, Parser}\nimport org.apache.tika.sax.BodyContentHandler\n\nobject TikaOCRParser {\n  private val pdfConfig: PDFParserConfig = {\n    val pdfConf = new PDFParserConfig()\n    pdfConf.setOcrDPI(100) //scalastyle:ignore magic.number\n    pdfConf.setDetectAngles(true)\n    pdfConf.setOcrStrategy(PDFParserConfig.OCR_STRATEGY.OCR_ONLY)\n\n    pdfConf\n  }\n\n  private val tesseractOCRConfig: TesseractOCRConfig = {\n    val tessConf = new TesseractOCRConfig()\n    tessConf.setLanguage(\"eng\")\n    tessConf.setEnableImageProcessing(1)\n\n    tessConf\n  }\n\n  private val parser = new AutoDetectParser(TikaConfig.getDefaultConfig)\n\n  private val parseContext = {\n    val parseCont = new ParseContext()\n    parseCont.set(classOf[Parser], parser)\n    parseCont.set(classOf[PDFParserConfig], pdfConfig)\n    parseCont.set(classOf[TesseractOCRConfig], tesseractOCRConfig)\n    parseCont\n  }\n\n  def parse(inputStream: InputStream, handler: BodyContentHandler, metadata: Metadata): Unit = parser.parse(inputStream, handler, metadata, parseContext)\n}\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"h2\",null,{\"children\":\"Tika Tika! Getting started doing OCR with Apache Tika andTesseract from the JVM (Scala, Java, Kotlin…).\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"I can do DataScience, mate!\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Some things are hard. Some things are not… Turns out that using OCR (Object Character Recognition) using Tesseract from the JVM is… not hard!\"}],\"\\n\",[\"$\",\"img\",null,{\"src\":\"/articles/images/1Aj8UgvxNf7r4zTjs-JqL7A.jpeg\",\"alt\":\"\",\"width\":\"292\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The trickiest part, really, is \",[\"$\",\"a\",null,{\"href\":\"https://github.com/tesseract-ocr/tesseract/wiki\",\"children\":\"setting up Tesseract\"}],\" on the machine you want to do your OCR on. Once you have managed to do that, you can just use the following Scala examples to use \",[\"$\",\"strong\",null,{\"children\":\"Apache Tika\"}],\" to do OCR in your own JVM project.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"First things first. Taking care of your dependencies…\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Add these to your \",[\"$\",\"code\",null,{\"children\":\"pom.xml\"}],\" or other build tool equivalent:\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"[pom.xml](https://gist.github.com/NRBPerdijk/111fae4189acafb2d75c7c66ba7f2be8#file-pom-xml)\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"    \u003cdependency\u003e\\n      \u003cgroupId\u003eorg.apache.tika\u003c/groupId\u003e\\n      \u003cartifactId\u003etika-core\u003c/artifactId\u003e\\n      \u003cversion\u003e1.24\u003c/version\u003e\\n    \u003c/dependency\u003e\\n    \u003cdependency\u003e\\n      \u003cgroupId\u003eorg.apache.tika\u003c/groupId\u003e\\n      \u003cartifactId\u003etika-parsers\u003c/artifactId\u003e\\n      \u003cversion\u003e1.24\u003c/version\u003e\\n    \u003c/dependency\u003e\\n\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Then, we need to properly configure a Tika Parser\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We need one in order to do actually do any \",[\"$\",\"a\",null,{\"href\":\"https://tika.apache.org/1.24/parser.html\",\"children\":\"parsing\"}],\". Because this kind of configuration tends to be ugly, I have put it all inside its own object/class to keep it separate from the rest of the code:\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"[TikaOCRParser.scala](https://gist.github.com/NRBPerdijk/b59332173c9598991f8774d98266e57d#file-TikaOCRParser-scala)\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"$10\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Finally, we have to create…\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"The code that provides the file to be OCRed.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"[TikaOCRApplication.scala](https://gist.github.com/NRBPerdijk/848526c10239f30129e20e8ea9ff6960#file-TikaOCRApplication-scala)\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"package tika.example\\n\\nimport java.io.ByteArrayOutputStream\\nimport java.nio.charset.Charset\\n\\nimport org.apache.tika.metadata.Metadata\\nimport org.apache.tika.sax.BodyContentHandler\\n\\nimport scala.util.{Failure, Success, Using}\\n\\nobject TikaOCRApplication extends App {\\n  val input = getClass.getResourceAsStream(\\\"/ExampleOCR.jpg\\\")\\n\\n  val outputStream = new ByteArrayOutputStream()\\n\\n  val attemptedOCR = Using(input) { inputStream =\u003e\\n    TikaOCRParser.parse(inputStream, new BodyContentHandler(outputStream), new Metadata())\\n  }.map { _ =\u003e\\n    new String(outputStream.toByteArray, Charset.defaultCharset())\\n  }\\n\\n  attemptedOCR match {\\n    case Success(value) =\u003e println(s\\\"OCR result was: $value\\\")\\n    case Failure(exception) =\u003e println(s\\\"OCR has failed, exception message was: ${exception.getMessage}\\\")\\n  }\\n\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We just turn the file we want to \",[\"$\",\"code\",null,{\"children\":\"OCR\"}],\" into an \",[\"$\",\"code\",null,{\"children\":\"InputStream\"}],\" and hand that off to the \",[\"$\",\"code\",null,{\"children\":\"TikaOCRParser\"}],\" we specified above for parsing. Because using \",[\"$\",\"code\",null,{\"children\":\"InputStreams\"}],\" and doing parsing are two IO processes that can (definitely) throw \",[\"$\",\"code\",null,{\"children\":\"Exceptions\"}],\", I have delegated the handling of the \",[\"$\",\"code\",null,{\"children\":\"InputStream\"}],\" using Scala’s \",[\"$\",\"code\",null,{\"children\":\"Using\"}],\" functionality, which will automatically wrap the whole operation into a \",[\"$\",\"code\",null,{\"children\":\"Try\"}],\" while also making sure that the \",[\"$\",\"code\",null,{\"children\":\"InputStream\"}],\" is closed when everything is done, \",[\"$\",\"em\",null,{\"children\":\"even when exceptions are thrown\"}],\". If the result is a Success, I convert it into a regular String, which can then be printed, or otherwise used at your convenience.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"em\",null,{\"children\":\"(The example file is a\"}],\" \",[\"$\",\"code\",null,{\"children\":\"jpeg\"}],\", but lots of different image formats, as well as \",[\"$\",\"code\",null,{\"children\":\"PDF\"}],\", are supported. Some, like \",[\"$\",\"code\",null,{\"children\":\"JPEG2000\"}],[\"$\",\"em\",null,{\"children\":\", might require extra supporting software to be installed on the machine.)\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"So, that’s it. Pretty easy, right? Check out the \",[\"$\",\"a\",null,{\"href\":\"https://tika.apache.org/\",\"children\":\"Apache Tika documentation\"}],\" to see what other great functionality is available. Tesseract OCR is a pretty tricky field in and off itself, so be sure to check out all the \",[\"$\",\"a\",null,{\"href\":\"https://tesseract-ocr.github.io/tessdoc/ImproveQuality\",\"children\":\"tweaks\"}],\" you may have to make for your particular dataset. If you want to see the full code for this example, you can \",[\"$\",\"a\",null,{\"href\":\"https://github.com/NRBPerdijk/tikascalaexample\",\"children\":\"check it out on GitHub\"}],\". Last but not least, kudos to the Apache Software Foundation for their continuing work towards great Open Source solutions.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Edit: I also wrote a short intro using Apache Tika to do Named-Entity Recognition (NER): \",[\"$\",\"a\",null,{\"href\":\"https://medium.com/codestar-blog/tika-nerding-getting-started-using-named-entity-recognition-with-opennlp-on-the-jvm-scala-java-befc396d6dc5\",\"children\":\"Tika NERding: Getting started using Named-Entity Recognition with OpenNLP on the JVM\"}],\".\"]}],\"\\n\",[\"$\",\"img\",null,{\"src\":\"/articles/images/1P93TyWUqN0foFjmMaB0ehQ.jpeg\",\"alt\":\"\",\"width\":\"800\"}]]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\na:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Codestar\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Codestar - a Sopra Steria team\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"8:null\n"])</script></body></html>